<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">
    <link rel="stylesheet" href="/assets/css/mui.css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Astra + Ansible | Data Architect</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Astra + Ansible" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to leverage Astra with Ansible" />
<meta property="og:description" content="How to leverage Astra with Ansible" />
<link rel="canonical" href="http://localhost:4000/astra/ansible/" />
<meta property="og:url" content="http://localhost:4000/astra/ansible/" />
<meta property="og:site_name" content="Data Architect" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Astra + Ansible" />
<script type="application/ld+json">
{"url":"http://localhost:4000/astra/ansible/","description":"How to leverage Astra with Ansible","headline":"Astra + Ansible","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1> Astra + Ansible </h1>
        </a>
        <h2> How to leverage Astra with Ansible </h2>
        <a href="" class="button"><small>Follow me on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1 id="what-is-ansible">What is Ansible?</h1>

<p>Ansible is an open-source software provisioning, configuration management, and application-deployment tool enabling infrastructure as code. It runs on many Unix-like systems, and can configure both Unix-like systems as well as Microsoft Windows.</p>

<h1 id="how-do-i-use-ansible">How do I use Ansible?</h1>

<p>I am a mac user with homebrew already installed so installing ansible is as simple as:</p>

<p><b>&gt;</b><code class="language-plaintext highlighter-rouge">brew install ansible</code></p>

<p>Next executing ansible playbooks is as easy as:</p>

<p><b>&gt;</b><code class="language-plaintext highlighter-rouge">ansible-playbook [playbook]</code></p>

<h1 id="working-with-ansibile-playbooks">Working with Ansibile Playbooks</h1>

<p>Before getting started with Astra &amp; Ansible download, fork, or clone my github repo which contains sample ansible playbooks to give you a head start</p>
<div class="mui-container">
    <div class="home mui-row">

      <div class="mui-col-md-6">
        <article class="mui-panel">
          <div class="bg-holder bg-deep-purple" style="background:url(/assets/images/database.jpg) no-repeat center center">
            <span class="post-list-title">
              <a class="post-link" href="/astra/postman/">GitHub: Astra Ansible Demo</a>
            </span>
            <div class="img-overlay"></div>
            <a href="/astra/postman/" class="overlay"></a>
          </div>
          <div class="post-data">
            <p class="post-excerpt">My GitHub repo which contains example ansible playbooks for the Astra DevOps and Data APIs.</p>
            GitHub Repo: <a href="https://github.com/ds-steven-matison/astra-ansibile-demo">astra-ansible-demo</a>
          </div>
        </article>
    </div>

  </div>
</div>

<h1 id="asta-devops-api">Asta DevOps API</h1>

<p>The Astra DevOps API allows Astra users to create databases, keyspaces, and take other DevOps actions at an organization level.  You will need to login to Astra UI, select your organization, and create a Service Account.  Once you create a Service Account click into menu on right side and choose Copy Credentials.  You should end up with a json object of the values you need.  You can now leave the Astra UI behind and work entirely from within ansible.</p>

<h2 id="devops-auth-post">DevOps Auth Post</h2>

<p>Add your Service Account details to astra_auth_request_body.  Run the playbook and grab the JWT token from the response.</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">---</span>

<span class="o">-</span> <span class="nx">hosts</span><span class="p">:</span> <span class="nx">localhost</span>
  <span class="nx">connection</span><span class="p">:</span> <span class="nx">local</span>
  <span class="nx">gather_facts</span><span class="p">:</span> <span class="nx">no</span>

  <span class="nx">vars</span><span class="p">:</span>
    <span class="nx">astra_api_url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.astra.datastax.com/v2/authenticateServiceAccount</span><span class="dl">"</span>
    <span class="nx">astra_auth_request_body</span><span class="p">:</span>
      <span class="nx">clientName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[asta_service_account_clientName]</span><span class="dl">"</span>
      <span class="nx">clientId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[astra_service_account_clientId]</span><span class="dl">"</span>
      <span class="nx">clientSecret</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[astra_service_account_clientSecret]</span><span class="dl">"</span>

  <span class="nx">tasks</span><span class="p">:</span>
    <span class="o">-</span> <span class="nx">name</span><span class="p">:</span> <span class="nx">create</span> <span class="nx">auth</span>
      <span class="nx">uri</span><span class="p">:</span>
        <span class="nx">url</span><span class="p">:</span> <span class="dl">""</span>
        <span class="nx">method</span><span class="p">:</span> <span class="nx">POST</span>
        <span class="nx">headers</span><span class="p">:</span>
          <span class="nx">Accept</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
          <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
        <span class="nx">body</span><span class="p">:</span> <span class="dl">""</span>
        <span class="nx">status_code</span><span class="p">:</span> <span class="mi">200</span>
      <span class="nx">register</span><span class="p">:</span> <span class="nx">response_auth</span>

    <span class="o">-</span> <span class="nx">name</span><span class="p">:</span> <span class="nx">debug</span>
      <span class="nx">debug</span><span class="p">:</span>
        <span class="kd">var</span><span class="p">:</span> <span class="nx">response_auth</span>
</code></pre></div></div>

<h2 id="devops-create-database">DevOps Create Database</h2>

<h2 id="devops-get-databases">DevOps Get Databases</h2>

<h2 id="devops-add-keyspace-to-database">DevOps Add Keyspace to Database</h2>

<h2 id="devops-reset-database-password">DevOps Reset Database Password</h2>

<h2 id="devops-resize-database">DevOps Resize Database</h2>

<h2 id="devops-park-database">DevOps Park Database</h2>

<h2 id="devops-unpark-database">DevOps Unpark Database</h2>

<h2 id="devops-terminate-database">DevOps Terminate Database</h2>

<h2 id="devops-get-secure-bundle-url">DevOps Get Secure Bundle URL</h2>

<h2 id="devops-get-supported-regions">DevOps Get Supported Regions</h2>


        </section>

        <aside id="sidebar">
	

<h1 id="find-me">Find Me</h1>

You can find me on Slacks:
<ul>
  <li><a href="https://datastax.slack.com" target="_blank" rel="noopener">DataStax Slack</a></li>
  <li><a href="https://the-asf.slack.com" target="_blank" rel="noopener">The ASF Slack</a></li>
  <li><a href="https://apachenifi.slack.com" target="_blank" rel="noopener">Apache NiFi Slack</a></li>
  <li><a href="https://nosqlbench.slack.com" target="_blank" rel="noopener">NoSqlBench Slack</a></li>
</ul>

You can find me on Stacks:
<ul>
  <li><a href="https://stackoverflow.com/users/14215291/ds-steven-matison" target="_blank" rel="noopener">ds-steven-matison</a></li>
  <li><a href="https://stackoverflow.com/users/4253286/steven-matison" target="_blank" rel="noopener">steven-matison</a></li>
</ul>

You can find me on Communities:
<ul>
  <li><a href="https://community.datastax.com/users/3254/ds-steven-matison.html" target="_blank" rel="noopener">DataStax Community</a></li>
  <li><a href="https://community.cloudera.com/t5/user/viewprofilepage/user-id/60150" target="_blank" rel="noopener">Cloudera Community</a></li>
</ul>
You can find me on Socials:
<ul>
  <li><a href="https://www.linkedin.com/in/steven-matison/" target="_blank" rel="noopener">LinkedIn</a></li>
  <li><a href="https://twitter.com/DsMatison" target="_blank" rel="noopener">Twitter</a></li>
</ul>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

    
  </body>
</html>
